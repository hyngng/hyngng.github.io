---
title: "한 장의 디지털 사진이 만들어지기까지"

categories: [에세이, 사진 이야기]
tags: [에세이, 사진 이야기, 카메라, 이미지센서, 렌즈]
start_with_ads: true

toc: true
toc_sticky: true

date: 2024-11-30 00:00:00 +0900
last_modified_at: 2024-11-30 00:00:00 +0900

mermaid: true
math: true
---

## **빛을 받아들이는 이미지센서**

카메라는 빛 정보를 기록하는 장치입니다. 공학적으로는 광선을 따라 입사한 광자의 개수를 측정하는 기계죠. 과거에는 필름의 화학 반응을 이용했지만 오늘날 카메라는 전자공학의 힘을 빌려 디지털 방식으로 사진을 찍습니다. 이때 사용하는 하드웨어는 이미지센서로, 그중에서도 CMOS(상보형 금속 산화 반도체) 이미지센서를 사용합니다. 이미지센서는 빛을 받아들이는 상부와 신호를 기초 처리하는 하부로 구성되어 있으며 그중 상부의 구조는 대략 다음과 같습니다.

```mermaid
block-beta
  columns 3
  block
    columns 1
	m1["마이크로렌즈"]
	c1["R 컬러필터"]
	p1["광다이오드"]
  end
  block
    columns 1
	m2["마이크로렌즈"]
	c2["G 컬러필터"]
	p2["광다이오드"]
  end
  block
    columns 1
	m3["마이크로렌즈"]
	c3["B 컬러필터"]
	p3["광다이오드"]
  end
```

렌즈를 거친 광자는 컬러 필터에 의해 RGB 색의 3요소로 나뉜 후 광다이오드에 의해 전기신호로 변환됩니다. 이때 이미지센서가 빛을 받아들일 때 중요한 것은 센서가 얼마나 많은 광자를 수집하는지입니다. 광자가 많이 도달하면 사진은 밝아지고, 적게 도달하면 어두워지죠. 따라서 같은 화소수를 가지고 있더라도 이미지센서의 크기가 크다면 더 많은 광자를 수집할 수 있어 동일 조도 환경에서 더 밝은 이미지를, 반대로 센서가 작다면 같은 환경에서 어두운 이미지를 얻게 됩니다.

변환된 전기 신호는 이미지센서가 지원하는 심도에 의해 다르게 세분화되며, 예를 들어 이미지센서가 12비트의 심도를 지원한다면 RGB 픽셀이 각각 개별적으로 2¹²가지의 밝기 정보를 표현함에 따라 한 개의 픽셀은 RGB 모두 합쳐 (2¹²)³개, 즉 68719476736가지 색을 표현할 수 있게 됩니다.

### **이미지 노이즈**

카메라는 그 원리상 노이즈가 발생할 수밖에 없습니다. 제조공정의 현실적인 수율상 발생하는 암전류 또는 픽셀별 감도의 편차에 의해 나타나기도 하고, 사진을 찍을 때 픽셀에 무작위로 입사하는 광자량의 차이에 의해 노이즈가 발생하기도 합니다. 전자를 고정 패턴 노이즈(FPN)라고 한다면, 후자는 임시 노이즈(Temporal Noise)라고 합니다. 고정 패턴 노이즈는 한 번 찍혀나온 하드웨어 특성상 사용자가 극복하기 어렵지만, 임시 노이즈는 노력을 통해 어느정도 제어할 수 있습니다.

이때 노이즈라는 개념을 이해하기 좋은 지표는 신호 대 잡음비(SNR)인데요, SNR은 다음과 같이 정의됩니다.

$$
\text{SNR} = \frac{P_{\text{signal}}}{P_{\text{noise}}}
$$

SNR은 낮을 수록 신호 대비 노이즈가 적다는 의미를 가집니다. 이미지센서의 경우 신호가 많아지면 노이즈의 절대량도 많아지지만, 그 비율, 즉 SNR은 점점 감소하기 때문에 노이즈를 감소시키기 위해서는 신호를 많이 받아들여야 합니다. 따라서 임시 노이즈는 근본적으로 사용자가 방지할 수는 없으나 노력을 통해 개선할 수는 있는 것이죠.

주로 광량 자체 또는 노출 시간을 증가시키나, 이미지를 여러장 찍어 하나로 합성하는 등의 방법이 있습니다. 그러나 만약 그 방법에 한계가 있다면 더 큰 하드웨어를 사용해야 합니다. 이미지센서의 총 픽셀 수를 화소수 또는 간단히 줄여 화소라고 하는데, 동일한 화소수에서도 이미지센서의 물리적인 크기, 즉 판형이 커지면 개별 화소의 크기 또한 커지게 되어 낮은 SNR값 달성에 유리하기 때문입니다.

|유형|모델|화소|픽셀 간격|
|---|---|---|
|풀프레임|소니 A7S3|12MP|8.36μm|
|모바일|삼성 갤럭시 S24 울트라 메인 카메라|12MP|2.40µm|

극단적인 예시이지만 상업용 카메라와 스마트폰 카메라를 비교하면 이렇습니다. 약 개별 픽셀이 선형으로 3.5배 커지게 되면 그 면적은 3.5²배, 즉 약 12배 유리하므로 저조도 조건에서 훨씬 밝고 명확한 이미지를 얻을 수 있게 됩니다. 사진가들이 불편함을 감수하더라도 크고 무거운 카메라를 사용하려는 이유입니다.

### **ISO, 또는 게인**

ISO는 과거 필름카메라를 사용할 때는 필름의 감도를 의미했으나 오늘날 디지털 이미지센서에서는 게인, 즉 신호 증폭을 의미합니다. 엄밀히 말하자면 감도는 픽셀 너비에 의해 결정되지만 그 값은 정적이므로 빛에 대한 민감도를 동적으로 조절하기 위해 게인을 대용으로 사용하는 것이죠. 따라서 ISO가 증가하게 되면 노이즈를 포함한 모든 신호가 증폭기에 높은 ISO가 필요한 상황은 가급적이면 피해야 합니다.

{% comment %}
조금 더 구체적으로는 ISO가 두 배 증가하게 되면 이미지도 두 배 밝아지게 됩니다. 이를 명확히 이해하기 위해서는 노출의 원리를 이해할 필요가 있습니다. 흔히 일컫는 노출의 3요소 중 ISO를 제외하고 조리개를 $$\text{K}$$, 노출 시간을 $$\text{T}$$라고 한다면 노출 $$\text{H}$$는 다음과 같이 표현할 수 있습니다.

$$
H \sim \text{ISO} \times \left(\frac{1}{K}\right)^2 \times T
$$

따라서 만약 동일노출을 유지하되 ISO를 그 절반으로 감소시키고 싶다면 셔터스피드는 그 두 배가 되어야 합니다. 또는 조리개값이 그 제곱근만큼 조절되어야 하죠.
{% endcomment %}

ISO는 다이나믹 레인지, 즉 DR에도 영향을 미칩니다. DR은 센서가 수집할 수 있는 최대 신호와 최소 신호의 비율로 정의되는데요, 각각을 $$L_{\text{max}}$$와 $$L_{\text{min}}$$라고 한다면 다이나믹 레인지 $$\text{DR}$$은 다음과 같은 식으로 표현할 수 있습니다.

$$
\text{DR} = \log_2 \left( \frac{L_{\text{max}}}{L_{\text{min}}} \right)
$$

이때 중요한 것은 ISO가 증가할 수록 최소 신호 값 또한 증가하게 된다는 점입니다. 최대 신호 값은 개별 픽셀에서 포화 상태로 일정하게 유지되므로 이미지의 어두운 부분이 점차 밝아짐에 따라 DR은 점차 낮아지게 됩니다. 이 역시 ISO를 가급적이면 낮게 통제해야 하는 이유입니다.

## **빛을 모으는 렌즈**

### **화각과 초점거리**

크롭 팩터는 43.3mm 풀프레임 규격 대비 기준으로 특정 이미지센서의 길이가 얼마나 차이가 나는지를 나타내는 지표입니다. 비교 대상이 되는 이미지센서의 대각선 길이를 $$\emptyset \, \text{im}$$라고 할 때 크롭 팩터 $$\text{c}$$는 다음과 같이 정의됩니다.

$$
\text{c} = \frac{43.3 \, \text{mm}}{\emptyset \, \text{im}}
$$

### **조리개 (F-number)**

> f/8 and be there

노출의 3요소 중 한 축을 담당하는 조리개입니다.

$$
f\text{-stop} = \frac{f}{D}
$$

- $$f$$: 초점 거리
- $$D$$: 직경 또는 입사동공 지름

구경이 $$\sqrt{2}$$배 될 때마다 빛이 입사하는 면적은 2배가 되며, 이 간격을 스탑(stop)이라고 합니다. 1스탑 단위로 조리개값을 F1.0부터 나열하면 다음과 같이 정리됩니다.

| F1.0 | F1.4 | F2.0 | F2.8 | F4.0 | F5.6 | F8.0 | F11 | F16 | F22 | F32 | F45 | F64 |

- 피사계 심도 이야기

## **이미지 신호 후처리**

- 디모자이크 (Bayer 패턴)
- 그렇게 만들어진 RAW, 라이트룸 보정

---

## **참고**

- [Smartphone imaging technology and its applications](https://www.degruyter.com/document/doi/10.1515/aot-2021-0023/html)
- https://meeco.kr/mini/36205366
- https://blog.naver.com/intrados/221588871606

{% comment %}

## **들어가며**

저는 간간히 사진을 찍습니다. 단순 기록용을 넘어 좀 더 예쁘고 보기 좋은 사진을 위해 이것저것 시도해보고 있죠.

찍다보니 점점 변수 하나하나를 파악하고 통제하고 싶은 욕심이 들기 시작했습니다. 단순히 ISO와 셔터스피드를 조절하는 것을 넘어 좋은 사진을 남길 수 없는 한계가 있을 수 있음을 인식하고, 괜찮은 사진을 남길 수 있는 요건에는 무엇이 있을까 하는 호기심이었습니다.

요 근래 스마트폰 카메라는 카메라라고 부르기 부끄럽지 않을 정도로 많이 상향평준화됐습니다. 사진을 주로 찍는다면 상업용 전문 카메라를 구할 필요 없이 스마트폰으로도 충분할 정도죠. 하드웨어는 더 크고 우람해졌고, 소프트웨어는 부족함 없이 카메라의 거의 모든 기능을 지원합니다.

특히 저는 [이런저런 사진]()을 찍기 시작하면서 스마트폰을 작은 디지털 카메라로 느끼게 되었고, 그 성능과 한계에 주목하게 되었습니다. 구체적으로 사진이 찍히는 원리와 과정이 궁금해 호기심에 찾아본 여러 문서의 내용을 정리했습니다.
{% endcomment %}
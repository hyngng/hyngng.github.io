---
title:  "Arm 모바일 아키텍처"
excerpt: "근 2년 Arm 모바일 CPU의 간단한 리뷰"

categories:
  - 전자기계
tags:
  - [Arm, ARM, AP, SoC, 스마트폰, 스마트폰 프로세서]

toc: true
toc_sticky: true
 
date: 2022-08-16
last_modified_at: 2022-08-19
---

Arm 아키텍처에 관심을 갖게 된 계기는 "CPU의 성능차이는 어떻게, 왜 발생하는 거지?"라는 궁금증이었다.  
관심사가 인텔이 아닌 Arm 아키텍처로 동작하는 모바일 기기에 있었기 때문에 눈길이 자연스레 Arm이 설계하는 CPU 개별 코어로 옮겨가게 된 것이다.

---

<h1>먼저 이해해야 하는 것들</h1>

CPU가 만들어지는 과정을 이해하기 전에, 용어를 사전에 한 번 정리하고 갈 필요가 있다.  

<h2>트랜지스터와 CPU</h2>

![kisspng-transistor-npn-power-converters-pnp-tranzistor-transistor-5adfc499b60965 2362534915246142977456-removebg-preview](https://user-images.githubusercontent.com/96360829/185552492-4b22d826-3033-46f3-b770-1c4d0410ef9e.png){: width="280" height="280"}
<span style="font-size:50%"><center>《가장 기본적인 형태의 트랜지스터》</center></span>

CPU는 P형반도체와 N형반도체를 이어 만든 <b>트랜지스터</b>의 광범위한 조합물이다.  

"<b>트랜지스터(Transistor)</b>"는 <b>전기전도성</b>을 가지면서 <b>저항</b>의 역할도 수행한다는 의미를 담아 Transfer(전송하다)와 Varistor(저항 소자)라는 두 영단어를 합성해 지어진 이름이다.  
트랜지스터는 전류 증폭, 전류 스위칭(On/Off), 등의 역할을 맡는데, 회로의 배치에 따라  AND(논리곱), OR(논리합), XOR(배타적 논리합) 게이트(gate) 등의 논리게이트를 구성하여 <b>논리연산</b>을 수행한다.

논리연산은 회로에 걸리는 규격화된 전압(5V 혹은 3.3V)에 따라 전압의 여부에 따라 0과 1로 치환되어 계산된다.
논리게이트를 끼리끼리 조합하면 그 경우와 규모에 따라 산수 연산과 보다 복잡한 논리연산이 가능하게 되며, 이 트랜지스터 조합 블록을 <b>산술 논리 장치(ALU)</b> 라고 부른다.

CPU에서 연산은 ALU에서 이루어진다. ALU의 입출력을 조율하는 <b>CU(제어 장치)</b>, 연산 도중의 임시 저장소 역할을 하는 <b>레지스터(Register)</b>, 데이터 통신 체계인 <b>버스(Bus)</b>, 병목현상(데이터 입출력 지연)을 방지하기 위한 <b>캐시(Cache)</b> 등 다른 CPU 구성 요소도 있지만, 출력물이 만들어지는 장소는 ALU이며 이 산술논리장치는 트랜지스터라는 지식적 산물이 근간을 이룬다.

<h2>아키텍처</h2>
 
CPU를 구성할 때 개별적인 ALU를 묶어 보다 효율적으로 동작하는 하나의 블록을 구성할 수 있는데, 이 때 하나의 CPU의 구성 요소가 되는 개별 블록를 <b>코어(Core)</b>라고 부른다.  
또한 CPU 구성 요소 중 하나인 캐시는 데이터 전송 속도와 데이터 전송 속도에 반비례하는 그 용량에 따라 <b>L1, L2, L3 캐시</b>로 분류된다.

CPU는 폰 노이만 구조라는 큰 틀 안에서 각 회사의 방침에 따라 세부구조가 각기 다르게 설계된다. 
코어의 구조나 개수가 다를 수 있고, 코어의 주위에 L1, L2, L3 캐시를 레벨마다 다른 방법으로 배치할 수도 있다. 이렇게 설계되는 CPU의 설계구조를 Architecture, <b>아키텍처</b>라고 한다.  
아키텍처는 회사마다 다르고, 한 회사의 아키텍처도 시간이 흐르고 구조가 수정됨에 따라 변할 수 있다.

<h2>시스템반도체와 SoC</h2>

우선, 반도체가 무엇이냐는 물음에는 이렇게 답하는 것이 좋을 것이다.

> <b>반도체</b>란, 원자가띠에 있는 최외각전자가 전도띠에 전이하여 자유전자가 되기 위해 필요한 띠 틈만큼의 에너지가 전도체와 부도체 사이 수준인 물질로, 실리콘(Si)과 저마늄(Ge) 등이 해당된다. 

이것은 맞는 설명이고 일반적인 지식이다.  
그러나 반도체라는 단어에는 <b>"가공되어 소비되는 반도체 칩, 혹은 반도체 산업"</b> 그 자체를 지칭하기 위한 관습적인 의미가 있으며 나는 이것을 사용할 것이다.  

반도체는 크게 램(RAM)과 롬(ROM)과 같이 정보를 저장하기 위한 <b>메모리반도체</b>와 CPU, GPU와 같이 정보를 처리하기 위한 <b>시스템반도체</b>의 두 가지 유형으로 분류된다.  
<b>SoC(System on Chip)</b>는 대표적인 시스템반도체의 일종으로, <i>CPU, GPU, 특히 모바일 프로세서의 경우 여기에 이미지 데이터 처리를 위한 ISP(Image Signal Processor), NPU(Neural Processing Unit) 외 VPU, DSP, 모뎀(MODEM)...</i>등, 전체의 시스템(System)이 칩(Chip) 하나에 담겨있는 기술집약 반도체를 말한다.  
<b>AP(Application Processor)</b>와도 혼동되는데, SoC가 개념을 객관화하고 분류하기 위한 집합에 붙여진 이름이라면 AP는 그 집합의 구성원소이다.

![E2200__SD888-removebg-preview](https://user-images.githubusercontent.com/96360829/185637458-0e5cef53-ad34-4e4b-9221-08197eebf8ee.png){: width="550" height="550"}
<span style = "font-size:80%" ><center>2021년의 대표적인 모바일 SoC인 스냅드래곤 888과 엑시노스 2100의 공식 다이어그램.</center></span>
<span style = "font-size:80%" ><center>기기사용에 필요한 모든 것들을 하나의 칩에서 조율한다.</center></span>

<h2>팹리스 기업, Arm</h2>

반도체를 설계하되 직접 생산하지 않는 기업을 제조(fabrication)하지 않는(less)다는 의미로 <b>팹리스(fabless)</b> 기업이라고 부른다.

<b>Arm</b>은 영국의 대표적인 팹리스 기업으로, 설계한 프로세서를 하드 마크로셀(Hard Macrocell, 코어 크기와 전압 등이 고정되어 설계변경이 불가능) 또는 합성 가능한 코어(Synthesizable core, 코어 크기와 내부 메모리 변경이 가능)를 지적재산권(IP)의 형태로 반도체 제조 회사에 라이센싱하여 판매한다.  
Arm으로부터 코어 설계도를 전달받은 SoC를 제조하는 회사는 Arm Core에 주변장치를 추가하여 SoC를 구성한 후 판매하거나 자체 제품에서 사용한다.

---

<h1>2021년의 안드로이드 CPU</h1>

![프레젠테이션1_Edited-D0qM8j8M--transformed](https://user-images.githubusercontent.com/96360829/185567837-6691c79e-b94e-4140-880d-826db7eb5ac1.png){: width="400" height="400"}
<span style="font-size:50%"><center>2021년의 대표적인 안드로이드 플래그십 스마트폰들</center></span>

이미 2022년의 3분기가 지나가는 시점에서 2021년의 안드로이드 SoC에 대한 글을 쓰는 이유는, 이 해가 칩셋설계의 관점에서 눈여겨볼만한 변곡점이라고 생각하기 때문이다.

2021년은 변화의 해였다.  
삼성은 엑시노스 커스텀 코어를 개발하던 미국 오스틴 공장의 몽구스 팀을 해체하고 순수 Arm의 레퍼런스 코어만으로 자사 SoC의 CPU를 구성하여 시장에 선보였고,
구글은 텐서(Tensor)라는 이름의 새로운 SoC의 발표를 통해 시스템반도체를 설계하는 또다른 팹리스 기업이 되었다.

또한, Arm CPU 레퍼런스 코어에서도 변화가 있었다.  
기존의 Cortex-A(하이엔드), R(메인스트림), M(엔트리) 시리즈에 이어 기존에 없던 새로운 CPU 시리즈, Cortex-X를 선보였으며, 첫 제품의 이름은 Cortex-X1가 되었다.  

Cortex-X1는 스마트폰보다는 노트북이나 서버를 타겟으로 개발한 제품이었다.



2021년 <i>삼성, LG, 샤오미, 구글, 소니, 오포, 비보, 샤프...</i>등 전 세계의 스마트폰 제조사는 삼성과 구글 두 회사를 제외하면 모두 순수히 퀄컴의 스냅드래곤만을 사용했다. 

그래서 2021년부터는 Arm이 공개하는 코어만 이해해도 아주 대부분의 안드로이드계 기기의 성능을 가늠해볼 수 있게 되었다.

<h2>2021년의 Arm 프로세서</h2>

<h3>Arm Cortex-X1</h3>

<img width="960" alt="A78-X1" src="https://user-images.githubusercontent.com/96360829/185733945-9c81a6d5-5801-411b-9705-43279da4f7be.png">{: width="300" height="300"}
<span style = "font-size:50%"><center>Armv8.2-A Cortex-X1</center></span>

> "The Cortex-X1 core is a high-performance and low-power Arm product that implements the Armv8-A architecture."  
> "The Cortex-X1 core provdes mechanisms to control both dynamic and static power dissipation."

Arm은 Cortex-A78을 기반으로 새롭게 만든 Cortex-X1 코어와 함께 새로운 Cortex-X시리즈를 출범하면서 그 이유를 더 높은 성능 때문이라고 말한다. Cortex-A78을 기반으로 

![Cortex-X1-03](https://user-images.githubusercontent.com/96360829/185745754-bc2e11d3-6480-411d-831b-896a48a1f805.png)

2016년부터 2020년까지 스마트폰에 탑재되는 모바일 CPU는 4개의 빅코어와 4개의 리틀코어로 총 8코어로 구성되는 것이 일반적이었다.  

그런데 이 관례를 깨고 기존의 빅코어는 미들코어로 활용하되, 사용하던 빅코어를 기반으로 새로운 빅코어 포지션에 위치할 얼티메이트 코어를 만들어내어 1개의 빅코어, 3개의 미들코어, 4개의 리틀코어로 CPU구성을 재설계한 것이다. 

<h4>Arm Cortex-A77</h4>

2021년에 출시된 안드로이드 기기를 구동하는 가장 강력한 AP는 삼성전자의 엑시노스 2100와 퀄컴의 스냅드래곤 888였다.

특이사항은 구글의 픽셀 6 시리즈(2022년에 출시된 구글 픽셀 6a를 포함)의 텐서(Tensor) 칩이다.

<h2>엑시노스 2100</h2>

<h2>스냅드래곤 888</h2>

---

<h1>2021년의 iOS CPU</h1>

A15 바이오닉(Bionic)은 2개의 Avalanche 고성능 코어, 4개의 Blizzard 효율 코어로 동작한다.

---

인용할 것 :
"It all comes down to what you're trying to accomplish," Carmack said. "I'll tell you where one big core versus two wins: when your goal is to win a single-threaded benchmark. You throw as many gates as possible at the one big core to win a single-threaded benchmark...  
If you want responsiveness, the quickest way to get that, and the most efficient way to get high-performance, is probably two big cores."




---

<h3>참고</h3>

Arm Devleloper : Cortex-X1 메뉴얼  
https://developer.arm.com/documentation/101433/0101/Functional-description/Introduction/About-the-core

https://www.clien.net/service/board/news/16623567

구글 텐서 칩 : 구글 실리콘의 부사장&총책임자인 Phil Carmack과 선임이사인 Monika Gupta의 인터뷰  
https://arstechnica.com/gadgets/2021/10/the-google-silicon-team-gives-us-a-tour-of-the-pixel-6s-tensor-soc/

Arm 아키텍처 배경지식  
https://www.dongs.kr/post_arm.html

Arm 64비트 명령어셍은 애플의 요구에 만들어진 것.  
https://gigglehd.com/gg/index.php?mid=mobile&page=3&document_srl=10524668
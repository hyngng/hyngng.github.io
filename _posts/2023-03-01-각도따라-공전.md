---
title:  "[유니티] 기준물체 좌우에서 각도 입력받아 공전하기"

categories:
  - 유니티
tags:
  - [유니티]

toc: true
toc_sticky: true
 
date: 2023-03-01
last_modified_at: 2023-03-01
---

<br/>

유니티는 기본적으로 공전을 위한 함수(RotateAround)를 지원하지만, 매개변수로 '속력'값을 받기 때문에 행성과 같은 지속적인 공전을 구현하고 싶은 것이 아니라면 사용하기에 애로사항이 있다.  

이에 대한 대안으로 간단한 고등학교 수학(삼각함수)을 사용하는 방법이 있다.  

<br/>

```cs

    ///<summarry>
    /// Stick     : 조이스틱의 '스틱'
    /// Center    : 조이스틱의 '중심'
    /// targetPos : 피공전 오브젝트가 위치해야 하는 좌표값
    ///</summarry>



    float MustFollowAngle = GetAngle((Vector2)Stick, (Vector2)Center);                  // GetAngle() 후 일정 상수를 더해줄 수 있다.
    targetPos = Center + new Vector3(Mathf.Cos(MustFollowAngle * Mathf.Deg2Rad), Mathf.Sin(MustFollowAngle * Mathf.Deg2Rad), 0);

    transform.position = Vector3.Lerp(transform.position, targetPos, 20 * Time.deltaTime);



    // 두 벡터 사이에서 각도를 구하기 위한 코드
    float GetAngle(Vector2 start, Vector2 end)
    {
        Vector2 v2 = end - start;
        return Mathf.Atan2(v2.y, v2.x) * Mathf.Rad2Deg;
    }
```

<br/>

![Orbit](https://user-images.githubusercontent.com/96360829/222128251-5c8bf082-a203-4632-b1dd-9e8660ee6766.gif)

<br/>

피공전 오브젝트에 위 원리를 이용한 스크립트를 적용하면 성공적으로 공전시킬 수 있다.  
(※ 이 스크립트는 위치(position)만 관여한다.)

<br/>

---
## <b>참고</b>
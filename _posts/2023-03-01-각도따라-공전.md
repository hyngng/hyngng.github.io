---
title:  "[유니티] 각도 입력받아 기준물체 공전하기"

categories:
  - 유니티
tags:
  - [유니티]

toc: true
toc_sticky: true
 
date: 2023-03-01
last_modified_at: 2023-03-01
---

<br/>

유니티는 공전을 위한 함수(RotateAround)를 지원하지만 매개변수로 '속력'값을 받기 때문에, 행성처럼 끝없이 이어지는 공전을 구현하고 싶은 것이 아니라면 사용하기에 애로사항이 있다.  

이는 각도와 길이가 주어졌을 때 삼각함수를 통해 좌표를 구하는 식으로 간략한 대안을 만들어 해결할 수 있다.  

<br/>

```cs

    /*
    stickPos  : 조이스틱의 '스틱'
    centerPos : 조이스틱의 '중심'
    targetPos : 피공전 오브젝트가 위치해야 하는 좌표값
    */



    float mustFollowAngle = GetAngle(stickPos, centerPos);
    targetPos = centerPos + new Vector3(Mathf.Cos(mustFollowAngle * Mathf.Deg2Rad), Mathf.Sin(mustFollowAngle * Mathf.Deg2Rad), 0);

    transform.position = Vector3.Lerp(transform.position, targetPos, 20 * Time.deltaTime);



    // 두 벡터 사이 각도 구하기
    float GetAngle(Vector2 start, Vector2 end)
    {
        Vector2 v2 = end - start;
        return Mathf.Atan2(v2.y, v2.x) * Mathf.Rad2Deg;
    }
```

<br/>

![Orbit](https://user-images.githubusercontent.com/96360829/222128251-5c8bf082-a203-4632-b1dd-9e8660ee6766.gif)

<br/>

피공전 오브젝트에 위 원리를 이용한 스크립트를 적용하면 성공적으로 공전시킬 수 있다.  

<div style="color:grey">※ 이 스크립트는 오브젝트의 위치(position)에만 관여하며, 오브젝트의 회전(rotation)에 관한 스크립트는 상황에 맞게 작성해야 한다.</div>

<br/>
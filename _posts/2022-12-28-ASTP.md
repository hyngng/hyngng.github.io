---
title:  "[Python] ASTP : 자동주식거래기"

categories:
  - 프로그래밍
tags:
  - [프로그래밍, 주식, 파이썬]

toc: true
toc_sticky: true
 
date: 2022-12-28
last_modified_at: 2022-12-28
---

<br/>

# ASTP : Auto Stock Trading Program

ASTP는 설정한 알고리즘에 따라 주식을 자동 매매해주기 위한 프로그램으로, 현재로서는 아주 단순한 두 전략만을 따른다.  

- NDX 지수와 NASDAQ 상장 1, 2위 기업의 비율을 고려하여 주식을 매수.
- NDX 지수가 폭락하거나, 환율이 과도하게 상승하는 등의 상황에서 보유주식을 전량 매도하고 20영업일간 매매활동을 중지.

한국투자증권의 OpenAPI를 사용하며, 이외 참고하는 자료로는 [Yahoo Finance](https://finance.yahoo.com/quote/NQ=F?p=NQ=F&.tsrc=fin-srch) 페이지의 NDX지수가 있다(크롤링으로 사용중).

<br/>

---

<br/>

# 사용법

<br/>

### 하나, 필수 사전작업

- 한국투자증권에서 계좌를 개설
- [한국투자증권 API(eFriend Expert)](https://www.truefriend.com/main/customer/systemdown/OpenAPI.jsp?cmd=TF04ea01200) 페이지에서 API 이용 신청, 'eFriend Expert' 프로그램을 설치.

<br/>

### 둘, 코드 실행 전 라이브러리 설치

```bash
pip install mojito2
pip install finance-datareader
```

<br/>

---

### 이외 주의사항

- 한국투자증권 계좌로 API를 신청한 후 APP Key, APP Secret를 발급받아 사용하며, 본 코드의 경우 별도의 mock.key 파일에서 정보를 읽어오도록 구성함.
- 공동인증서 모듈이 64bit를 미지원하는 이슈가 있기 때문에, 코드를 정상적으로 실행하기 위해서는 32bit 가상환경을 구축할 필요가 있음. (자세한 것은 [VsCode에서 32비트 가상환경 구축하기](https://kiw6024.github.io/posts/32bit/)를 참조)
- 미국 장은 한국시간으로 밤 11:30부터 다음날 아침 6:30까지 열리기 때문에, 일반적인 경우와 달리 ASTP는 코드 동작을 확인할 수 있는 시간에 강한 제약이 있음

---

---
## <b>참고</b>

[안드로이드 개발 시 참고](https://stockant.tistory.com/343)
[ASTP 깃허브](https://github.com/kiw6024/ASTP)
---
title:  "Vue.js에서 axios 라이브러리 사용하기"

categories: [프로그래밍, Vue]
tags: [프로그래밍, 웹]

toc: true
toc_sticky: true
 
date: 2023-05-17
last_modified_at: 2023-05-17
---

<br>

`axios`는 HTTP 비동기(async) 통신을 지원하는 자바스크립트 라이브러리로 React, Angular, Ember.js, Svelte 등 자바스크립트를 지원하는 여러 프론트엔드 프레임워크에서 사용 가능하며, Vue.js에서도 사용할 수 있다. 터미널 등지에서 `npm install axios` 명령어로 설치할 수 있으며, 라이브러리의 네 가지 RestAPI 메서드를 통해 CRUD 기능을 쉽게 구현할 수 있다.

# CRUD 구현

```js
import axios from "axios";

// get
axios.get("url")
.then(res => {
    console.log(res.data)
});

// post
axios.post("url", { data : dataToSend })
.then(res => {
  console.log(res.data)
});

// put
axios.put("url", {
  console.log(res.data)
});

// delete
axios.delete("/user?ID=12345", {
  console.log(res.data)
});
```

각 메서드의 `url` 인자값에는 예를 들어 `http://localhost:8000`와 같이 서버의 URL 주소를 입력하면 된다.  
axios는 create() 메서드로 아래와 같이 axios 객체 속성을 직접 설정하여 사용할 수도 있다.

<br>

```js
import axios from 'axios';

//1. Axios 인스턴스 만들기
const api = axios.create({baseURL: 'url'});

export interface createPayload {
    name: string;
    description: string;
}

const createGameAPI = (payload) => api.post('game/', payload);
```

메인 코드를 작성해두고, 타 파일에서 `import { createAPI } from "@/apis/index.js"` 등으로 사용할 수 있다.

<br>

---

# CORS 오류

![image](https://github.com/kiw6024/kiw6024.github.io/assets/96360829/f75b0a28-dfb1-4e4d-bc65-b983f6953b24)

이를 로컬 서버와 데이터를 주고받을 때 문제가 될 수 있는 것이 CORS(Cross-Origin Resource Sharing) 보안 정책인데, CORS이란 특정 도메인, 포트, 프로토콜 등으로부터 타 URL로의 데이터 흐름을 웹 브라우저 단에서 막는 정책으로 CRUD 구현에 방해가 된다.  
이 문제를 해결하기 위해서는 백엔드단에서의 조치도 필요하지만(Django의 경우 `django-cors-headers` 라이브러리를 통해 예방할 수 있다.) Vue.js와 같은 프론트엔드 단에서의 조치도 필요한데, 프론트엔드 단에서의 해결방법은 간단하다. `프로젝트\assets`{: filepath } 폴더에 `vue.config.js` 파일을 생성하여 프록시 서버 사용을 선언해주면 된다.

<br>

```js
module.exports = {
    devServer: {
        proxy : 'http://localhost:8000'
    }
}
```

프록시 서버란 클라이언트와 서버 사이에서 데이터 흐름을 중계해주는 서버로, 이를 사용하면 웹 어플리케이션의 요청을 우회해주는 효과가 있다.
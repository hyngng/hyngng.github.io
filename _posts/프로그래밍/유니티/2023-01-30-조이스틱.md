---
title:  "유니티에서 조이스틱 구현하기"

categories: [프로그래밍, 유니티]
tags: [유니티, Unity, 안드로이드, Android]

toc: true
toc_sticky: true
 
date: 2023-01-30
last_modified_at: 2023-04-13
---

<br>

유니티는 조이스틱 동작을 위한 `OnScreenStick` 클래스를 공식적으로 지원하므로 이것을 이용하는 것이 편리하다.  
`OnScreenStick` 클래스는 `Package Manager > Unity Registry` 경로로 `Input System`을 설치 및 임포트하여 사용할 수 있다. 조이스틱으로 사용할 이미지형 UI를 생성하여 `OnScreenStick` 컴포넌트를 추가하는 식으로 사용할 수 있다.

<br>

다만 나는 조이스틱의 중심이 되는 오브젝트까지 포함해 하나의 프리팹으로 사용하고 싶어서, 조이스틱과 플레이어의 움직임을 동기화하기 위한 코드를 작성할 겸 새 스크립트를 작성했다.

<br>

---

# 플레이어 이동 동기화

```cs
// movePlayer.cs

private float _moveSpeed = 0.1f;

void Update()
{
    distanceFromCenter = joystickPosition.anchoredPosition
                       - centerPosition.anchoredPosition
                       + new Vector2(transform.localScale.x / 2, transform.localScale.y / 2);

    player.transform.Translate(distanceFromCenter * Time.deltaTime * _moveSpeed);
  }
```

<br>

각 오브젝트의 좌표값 차를 통해 플레이어의 이동에 동기화하기 위한 벡터값을 구할 수 있으므로, 적절한 상수를 곱해 플레이어 이동을 구현할 수 있다.

<br>

---

# 무기 회전 동기화

---
# 참고
[유니티 스크립팅 API | Class OnScreenStick](https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html)
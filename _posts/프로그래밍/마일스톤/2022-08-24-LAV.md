---
title:  "유니티로 구현하는 LAV-AD"

categories: [프로그래밍, 마일스톤]
tags: [유니티, Unity, C#, LAV-AD, 게임]
image: /assets/img/2022-08-24-LAV/LAVAD_working.gif

toc: true
toc_sticky: true
 
date: 2022-08-24
last_modified_at: 2023-11-22
---

![LAVAD_working2](/assets/img/2022-08-24-LAV/LAVAD_working2.gif)

# **들어가며**

어렸을 때 **[한 유튜버(Tooner)](https://www.youtube.com/@tooner/videos)**가 구현하는 탱크의 무한궤도나 각도와 재질에 따라 달라지는 탄흔 흔적, 섬광탄 이펙트 등 대중적인 밀리터리 판타지를 구현하는 모습을 정말 인상깊게 보았던 기억이 있습니다. 편집 없는 원테이크 영상에 조회수는 애매하게 적었지만 이 사람이 무엇에 몰입해 무엇을 만들었는지가 일관되게 잘 나타나 있다는 점이 멋있어 보였죠.

시간이 지나고 오늘이 되어 시간이 붕 뜨던 와중, 컴퓨터로 가시적인 결과물을 내보고 싶은 마음에 유튜버의 행적을 롤모델 삼아 2주간 블렌더와 유니티로 **[제 첫 번째 마일스톤](https://kiw6024.github.io/categories/%EB%A7%88%EC%9D%BC%EC%8A%A4%ED%86%A4/)**을 완성했습니다.

# **블렌더**

![LAVAD_modeling](/assets/img/2022-08-24-LAV/LAVAD_modeling.png){: .w-50 .left }
프로젝트의 주제는 LAV-AD라는, 군용 차량입니다.

많고 많은 주제 중에 하필 LAV-AD인 이유는 두 가지가 있습니다. 하나는 이전에 배틀필드 4라는 게임에서 이 차량을 정말 재미있게 플레이한 기억이 있기 때문이고, 다른 하나는 제가 알고 있는 차량 중에서는 가장 기하학적인 생김새를 갖고 있어 직접 모델링을 할만해보였기 때문입니다.

인터넷에서 모델을 구할 생각도 했지만, 찾아보니 무료모델은 품질이 조악했고 유료모델은 달러를 요구하고 있었습니다. 가볍게 시작한 프로젝트에 돈을 지불할 생각은 없으니 모델링에 입문할 당위성이 생긴 셈이죠. 곧 부담없이 전면 설계도와 같은 자료를 모으고 블렌더 무료 강의를 찾아 블렌더 용어를 배우고, 단축키를 익히며 저의 첫 모델을 만들기 시작했습니다. 버텍스와 버텍스를 이어 에지를, 에지와 에지를 이어 페이스를 만들며 `Ctrl + B`로 모서리를 다듬어 나갔고, 차차 차체를, 그리고 포탑과 포신을 완성했습니다.

# **유니티**

![LAVAD_coding](/assets/img/2022-08-24-LAV/LAVAD_coding.png){: .w-50 .right }
그 다음 할 일은 코딩이었습니다. 돌이켜보면 정말 막무가내였는데, 객체지향이 뭔지도 몰랐고 컴포넌트 기반 설계가 뭔지도 모르는 상태에서 돌 다리를 죄다 두들겨보면서 발을 디뎌나갔습니다.

ChatGPT가 대중화되기도 전이라 국내의 티스토리, 네이버 블로그 포스트를 넘어 인도계 유튜버 강의나 2015년도에 올라온 스택오버플로우 질문글은 모두 한 번씩 찾아보며 무작정 따라했습니다. 위의 유튜버 포트폴리오와 비교할 수 있는 정도까지 구현해보고싶다는 고집 때문에 도중에 포기하지도 못했죠.

그런데 하다보니 재미가 있었습니다. VSCode 화면을 알록달록하게 꾹꾹 빛내는 코드를 보자니 내가 정말 뭔가를 열심히 하고 있구나 하는 생각이 들었습니다. 길어지는 코드를 보고 있자면 스파게티 코드가 되지 않을까 하는 걱정보다는 내 프로그램이 정교하게 돌아간다는 생각에 뿌듯함이 먼저 느껴졌습니다. 근본적으로 작성한 프로그램이 어찌저찌 제대로 작동하고 있었기 때문이겠죠.

<br>

<div class="row">
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug1.gif" alt="LAVAD_bug1">
    </div>
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug2.gif" alt="LAVAD_bug2">
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug3.gif" alt="LAVAD_bug3">
    </div>
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug4.gif" alt="LAVAD_bug4">
    </div>
</div>

물론 버그도 많았습니다. WASD 입력이 들어오면 sinθ과 cosθ을 거쳐 방향이 조정된 회전과 가속을 구현하려 했는데 고등학교 수학의 한계인지 완전 엉터리로 작동한다던가, 서스펜션 구현을 위한 `Wheel Collider` 컴포넌트를 적용하자 바퀴 오브젝트의 축이 엇나가있어 바퀴가 굴러가면 안 되는 방향으로 굴러간다던가.

기존의 모델링이 마음에 안 들어 다시 새로 모델링한 차체를 적용하자 기존의 질량(mass)값이 말썽을 일으킨다던가, 탄피배출 이펙트 구현을 위해 파티클 시스템을 새로 만져보는데 의도대로 작동하지 않고 엄청난 양의 탄피를 쏟아낸다거나.

세미콜론이나 괄호의 누락, 잘못된 리스트, 배열 접근 등 코드에서도 여러가지 자잘한 에러가 겹치면서 생각보다 순탄치 않은 흐름에 당황했던 기억도 납니다. 특히 휠 콜라이더를 적용하면서부터는 가뭄이 든 듯한 국내자료를 보면서 내가 뭘 하고 있는건지 막막하기도 했으니까요.

<br>

![LAVAD_main](/assets/img/2022-08-24-LAV/LAVAD_main.png){: .shadow }

![LAVAD_main2](/assets/img/2022-08-24-LAV/LAVAD_main2.png){: .shadow }

그래도 총 9차례 빌드를 거치며 스스로 만족할만한 수준까지는 만들어냈습니다.

1인 개발인 겸 여러가지 개인적인 기호나 바램도 들어가서 카메라 포스트 프로세싱을 적용해 얕은 심도 효과를 구현하거나, 1인칭에서 3인칭 전환시 효과음이 먹먹해지는 효과를 만들거나, 전진이나 후진시 뒷바퀴에서 방향에 맞게 흙먼지가 날리고 특히 후진시에는 후미등이 강하게 점등되는 등 추가적인 세부 디테일을 구현하면서 재밌게 마무리했습니다.

# **마치며**

7월 8일에 시작해 7월 25일에 마지막 빌드를 거쳤으니 17일동안 완성한 단기 프로젝트네요. 개인적으로는 마지막 빌드를 만들면서 다음에 체계적이고 큰 시스템을 만들어보고 싶다는 생각을 했습니다. 특히 C#에 대한 이해가 부족한 상태로 목표달성에만 급급해 대부분의 코드를 절차지향적으로 단순하게 작성하고 만 아쉬움이 있었습니다.

그래도 3D 모델을 직접 제작해 사용해보거나, 코드 내 여러 개의 상수, 파티클 이펙트, 포스트 프로세싱 등 작은 수준의 연출을 주도해보고, 컴포넌트 기반 설계 또는 객체지향에 대한 기초 개념을 접하는 등 이전까지 모르고 있던 새 패러다임을 여럿 접하게 된 점은 큰 수확인 것 같습니다.

마지막으로, 혹시 관심있는 분들은 [깃허브](https://github.com/kiw6024/LAV-AD)에서 다운받아 플레이하실 수 있습니다.
---
title:  "유니티로 구현하는 LAV-AD"

categories: [프로그래밍, 마일스톤]
tags: [유니티, Unity, C#, LAV-AD, 게임]
image: /assets/img/2022-08-24-LAV/LAVAD_working.gif

toc: true
toc_sticky: true
 
date: 2022-08-24
last_modified_at: 2023-11-22
---

![LAVAD_main](/assets/img/2022-08-24-LAV/LAVAD_main.png)

![LAVAD_main2](/assets/img/2022-08-24-LAV/LAVAD_main2.png)

어렸을 때 **[한 유튜버(Tooner)](https://www.youtube.com/@tooner/videos)**가 구현하는 탱크의 무한궤도나 각도와 재질에 따라 달라지는 탄흔 흔적, 섬광탄 이펙트 등 대중적인 밀리터리 판타지를 구현하는 모습을 정말 인상깊게 보았던 기억이 있습니다. 편집 없는 원테이크 영상에 조회수는 애매하게 적지만 이 사람이 무엇에 몰입해 무엇을 만들었는지가 일관되게 잘 나타나 있다는 점이 멋있어 보였죠.

시간이 지나고 오늘이 되어 시간이 붕 뜨던 와중, 컴퓨터로 가시적인 결과물을 내보고 싶은 마음에 유튜버의 행적을 롤모델 삼아 3주간 블렌더와 유니티로 **제 첫 번째 마일스톤**을 만들었습니다.

# **블렌더**

![LAVAD_modeling](/assets/img/2022-08-24-LAV/LAVAD_modeling.png){: .w-50 .left}
프로젝트의 주제는 **LAV-AD**라는, 군용 차량입니다. 굳이 정확히 하자면 대공장갑차량이죠.

많고 많은 주제 중에 하필 LAV-AD인 이유는 두 가지가 있습니다. 하나는 이전에 **배틀필드 4**라는 게임에서 이 차종을 정말 재미있게 플레이한 기억이 있기 때문이고, 다른 하나는 제가 알고 있는 차량 중에서는 가장 기하학적인 생김새를 갖고 있어 직접 모델링을 할만해보였기 때문입니다.

인터넷에서 모델을 구할 생각도 했지만, 찾아보니 무료모델은 품질이 조악했고 유료모델은 달러를 요구하고 있었습니다. 가볍게 도전하는 프로젝트에 돈을 지불할 생각은 없으니, 모델링에 입문할 **당위성**이 생긴 셈이죠. 곧 부담없이 전면 설계도와 같은 자료를 모으고 블렌더 무료 강의를 찾아 블렌더 용어를 배우고, 단축키를 익히며 저의 첫 모델을 만들기 시작했습니다. 버텍스와 버텍스를 이어 에지를, 에지와 에지를 이어 페이스를 만들며 `Ctrl + B`로 모서리를 다듬어 나갔고, 차차 차체를, 그리고 포탑과 포신을 완성했습니다.

# **유니티**

![LAVAD_coding](/assets/img/2022-08-24-LAV/LAVAD_coding.png){: .w-50 .right}
그 다음 할 일은 코딩이었습니다. 돌이켜보면 정말 막무가내였는데, 객체지향이 뭔지도 몰랐고 컴포넌트 기반 설계가 뭔지도 몰라 처음엔 정말 돌 다리를 죄다 두들겨보는 심정으로 발을 디뎌나갔습니다.

ChatGPT가 대중화되기도 전이라 국내의 티스토리 포스트를 넘어 인도계 유튜버 강의나 2015년도에 올라온 스택오버플로우 질문글은 죄다 한 번씩 찾아보며 무작정 따라했습니다. 먼저 말씀드린 [유튜버](https://www.youtube.com/@tooner/videos)의 포트폴리오와 비교할 수 있는 정도까지 구현해보고싶다는 고집 때문에 도중에 포기하지도 못했죠.

그런데 하다보니 재미가 있었습니다. VSCode 화면을 알록달록하게 꾹꾹 빛내는 코드를 보자니 내가 정말 뭔가를 열심히 하고 있구나 하는 생각이 들었습니다. 길어지는 코드를 보고 있자면 스파게티 코드가 되지 않을까 하는 걱정보다는 내 프로그램이 정교하게 돌아간다는 생각에 뿌듯함이 먼저 느껴졌습니다. 근본적으로 작성한 프로그램이 제대로 작동하고 있었기 때문이겠죠.

<div class="row">
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug1.gif" alt="LAVAD_bug1">
    </div>
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug2.gif" alt="LAVAD_bug2">
    </div>
</div>
<div class="row">
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug3.gif" alt="LAVAD_bug3">
    </div>
    <div class="col-md-6">
        <img src="/assets/img/2022-08-24-LAV/LAVAD_bug4.gif" alt="LAVAD_bug4">
    </div>
</div>

물론 버그도 많았습니다. WASD 입력이 들어오면 sinθ과 cosθ을 거쳐 방향이 조정된 회전과 가속을 구현하려 했는데 고등학교 수학의 한계인지 완전 엉터리로 작동한다던가, 서스펜션 구현을 위한 `Wheel Collider` 컴포넌트를 적용하자 바퀴 오브젝트의 축이 엇나가있어 바퀴가 굴러가면 안 되는 방향으로 굴러간다던가.

기존의 모델링이 마음에 안 들어 새로 모델링한 차체를 적용하자 기존의 질량(mass)값이 말썽을 일으킨다던가, 탄피배출 이펙트 구현을 위해 파티클 시스템을 새로 만져보는데 의도대로 작동하지 않고 엄청난 양의 탄피를 쏟아낸다거나.

<!--

23.11.22 메모

위 사진 4개 중에 첫번째 modeling과 두번째 coding 사진은
https://chirpy.cotes.page/posts/text-and-typography/
참고해서, Float to left와 Float to Right 적용하여 각각
블렌더와 코딩 경험 쓰기. 기억나는대로라도..

-->




<!--


---

<br>

# 객체 지향과 컴포넌트 기반 설계

<br>

큰 기대 없이 도전했지만 결과적으로는 기념비적인 터닝포인트가 되었다. 프로그래밍 이론 활용을 위한 의욕을 가지는 동기를 제공받았을 뿐만 아니라 시스템의 인과관계를 더 잘 이해하기 위한 자세를 가질 수 있었고, 다음에는 더 크고 체계적인 시스템을 만들어보고 싶다는 꿈을 가지는 계기가 되었다.

<br>

```cs
public class ClassName : MonoBehaviour
```

처음에는 C#과 객체 지향의 개념 모두 아는 것이 없어 위의 첫 줄 코드부터 당황했던 기억이 난다.

<br>

"Make sure that there are no compile errors and that the file name and class name match."라는 콘솔 메시지로 파일명과 클래스명은 동일해야 한다는 정도만 알 수 있었고, 예를 들어 `class` 앞의 `public`은 무엇을 의미하는지, `class`가 무엇인지, `ClassName`과 `MonoBehaviour` 사이에 콜론(:)은 왜 있는지, 뒤의 `MonoBehaviour`가 뭔지는 전부 알 수 없었다. 조급한 마음에 그러한 개념들이 고안된 배경이 눈에 들어오지 않았다.

<br>

컴포넌트에 대한 이해도 없었기 때문에 `Rigidbody`나 `Collider` 등 오브젝트 이동을 구현하기 위한 기본 컴포넌트를 적용하는 단계에서부터 기존 프로그래밍과는 다르다는 괴리감이 있었다. 스크립트를 생성했을 때 그것이 왜 오브젝트의 컴포넌트로 추가되어야 하는지, 오히려 코드단에서 오브젝트와 연결하는 개별 코드를 작성하는 것이 정석적인 방법이 아닌가 하는 생각이 있었다.

<br>

하지만 꼭 만들어 보고 싶었고 유니티 공식 문서를 참조하며 스택오버플로우, 국내 티스토리 블로그와 해외 유튜브 영상에서 코드를 계속 따오자 처음이라 어려웠던 휠 콜라이더(Wheel Collider) 컴포넌트도 적용하여 스크립트로 구현해낼 수 있었다. 이에 나아가 총알 오브젝트 생성을 위한 프리팹 인스턴스화를 시도하면서부터는 C#은 물론 객체지향, 컴포넌트 개념과 사용이유를 잘 이해했던 것 같다.

<br>

# 프로그래밍 감각

파이썬과 C의 영향을 받은 탓에 변수의 이름을 지을 때 `intantiated_gameobject`와 같이 언더바(_)를 사용했다. 그런데 다른 사람들은 `instantiatedGameObject`와 같이 단어간 구분을 대소문자를 사용하여 짓는 것이었다. 심지어는 `_instantiatedGameObject`처럼 변수명 앞에 언더바를 붙이는 경우도 많았다.  
알고 보니, 파스칼케이스와 카멜케이스, 혹은 언더스코어라는 별도의 이름이 있을 정도로 정립된 방식이었고, 변수명 앞에 언더바(_)를 붙이는 것은 그것이 `private` 키워드로 선언된 변수임을 나타내기 위함이었다.

<br>

# 블렌더

블렌더로 자체 3D 모델을 제작했다. LAV-AD 3D 모델은 시중에서 구할 수 있지만, 무료 모델은 퀄리티가 낮았고 쓸만한 모델은 두 자릿수의 달러를 요구했기 때문에 과감히 도전했는데, 버텍스와 버텍스를 이어 에지를, 에지와 에지를 이어 페이스를 만들어 나만의 3D 모델을 만들고 이를 게임 시스템 구성원으로 임포트하는 것은 이전에 겪지 못했던 신기한 경험이었다. 

<br>

몇 가지 기본 단축키 만으로 원하는 3D모델을 구성할 수 있음은 물론 이를 원하는 확장자(.fbx, .3ds, .obj 등)로 빌드해 다른 독립된 프로그램에서 사용한다는 게 정말 강렬한 기억으로 남았다.

<br>
<br>



그러나 블렌더가 제공한 진가는 인터넷에서 '다른 사람들이 블렌더로 무엇을 만드는가'를 관찰할 동기가 되었다는 것으로, 오늘날 개개인의 판타지를 실현하는 방법에 더 이상 펜과 종이만 놓여있지 않음을 알게 되는 계기가 되었다.[^2]



그 주체가 나라는 점도 좋았다. 마치 하청업체(유니티)에게 명세서와 설계도를 함께 보내어 생산을 주문하는 느낌이었다.

2023.04.11<br>
종래의 전통적인 구글링만으로 맨땅에 헤딩하듯이 비결을 알아내는 시대가 저물고 인공지능을 이용해 효율적으로 탐색하는 시대가 온 오늘날, 그러한 경험의 사실상의 막차를 탔다는 것에 대해 미묘한 감정이 있다.  
"좀 더 일찍 등장하지" 싶으면서도 시대가 변화하고 있음을 느끼고 기술발전에 관심을 가지는 계기가 되었음을 생각하면 위안이 된다.

-->
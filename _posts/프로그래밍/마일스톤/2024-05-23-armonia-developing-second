---
title: "횡스크롤 감성 게임 개발하기: 프로토타입 개발 과정 두 번째"

categories: [프로그래밍, 마일스톤]
tags: [프로그래밍, 유니티, C#, 개발일지]
start_with_ads: true

image:
    path: /2024-04-30-armonia-developing-first/prototype-gameplay.webp
    lqip: data:image/webp;base64,UklGRiQBAABXRUJQVlA4TBgBAAAvD8ABAM1kRP9jE+UpQv/D4CCSJEXqOXpmBhts/1W8BGZa6B0bG44kyW2bnQUUHM7+//t8zQmA2wiMHEXSexc+ENN/QdRAxJC9WSlicZYaCiHEiBEEBULCMMoQhMMi0bv93TqZbAMSDEWRd+s75TKrKm4VicC+vLm9fnxs++PKnIq5yl2/HI/H7Znt/PFTbA+vP6RcraP+/u4u769YybUSgygQFMaTzCmCmruS9R8Wur+T874jmH1RRSUTIWlnwwMxK3/FTqFkkIRu7it/NDlMKxKqKhJtqW+MXnKWekjlKoNGylt4ripQbry6Ou5Me5Ctq6J0E8qGQe2+v3Tlrj/5bLz7VimPuFYRKZDFKkBIEQUROUhNEJEA
    alt: 개발중인 프로토타입

toc: true
toc_sticky: true

lang: ko

date: 2024-05-28 18:14:00 +0900
last_modified_at: 2024-05-28 18:14:00 +0900

mermaid: true
---

## **들어가며**

> [전 글](https://hynrng.github.io/posts/armonia-developing-first/)에서 이어집니다.
{: .prompt-info }

제 [네 번째 마일스톤](https://hynrng.github.io/categories/%EB%A7%88%EC%9D%BC%EC%8A%A4%ED%86%A4/) 개발기입니다. 다시 한 번 한 달 동안 만든 결과물을 정리했습니다. 이번 한 달은 조금 지친건지 개발이 분명 즐겁긴 한데 한 편으로는 힘들고 손이 가지 않는 부분이 있었습니다. 이번 단계에서 만든 것은 다음과 같습니다.

게임 시스템
: - [x] 배경 오브젝트 계층화
- [x] 셰이더 그래프 교체를 통한 최적화
- [x] 핀치 줌아웃으로 접근 가능한 설정창
- [x] 절차적 애니메이션을 이용한 오브젝트 상호작용

추가된 오브젝트
: - [x] 뒷배경 역할을 하는 2종의 건물 오브젝트

## **애셋**

![pigeon-digging](/2024-05-31-armonia-developing-second/pigeon-digging.webp)

- 비둘기 땅 쪼는거 그림
- 2D 셰이더 새로 찾아 적용함 (후술할거임)
    - 그림자 포기해야 하나

## **개발**

### **설정창 구상 및 구현**

- 평범한 버튼으로는 만들기 싫었다. (홍대병 + 그건 전 PALETTE에서 이미 해봄)
- 평소 즐겨보는 street photography 컨텐츠, 그리고 영화를 찍는 듯한 제작 감각을 옮겼음.
- 만족스러움.

### **절차적 애니메이션 적용**

- 드디어 적용했다!
- 기술적인 챌린지가 될 줄 알았는데 생각보다 쉬웠고, 생각보다 더러워서 어려웠음.

```cs
public void ChangeSourceObject(GameObject discoveredObject)
{
    WeightedTransformArray sourceObjects = Constraint.data.sourceObjects;
    WeightedTransformArray newSourceObjects = new WeightedTransformArray(sourceObjects.Count);
    
    newSourceObjects[0] = new WeightedTransform();
    WeightedTransform wt = newSourceObjects[0];

    /* ... */

    newSourceObjects[0] = wt;
    
    data.sourceObjects = newSourceObjects;

    Animator.enabled = false;
    rigBuilder.Build();
    Animator.enabled = true;
}
```
{: file="People.cs" }

우와, 힘들었습니다.

- SourceObject를 교체해야 하는데
- 읽기 전용(read-only)인거 몰랐고
- Animator를 껐다가 켜야 적용되는 것도 몰랐음.
- 나중에 3D 토이프로젝트 만들게 되면 꼭꼭 더 잘 활용해보고 싶다.

- 비둘기는 얼굴 몸 다리 통짜라서 적용이 안 되는데, 사람은 얼굴 몸 다리 다 독립된 오브젝트라 적용해봤음.

### **프로파일러를 이용한 최적화**

- 발열 개심했음. 40FPS 유지가 안 될 정도
- 신경쓰여서 해결해줬음. 그림자를 생성하는 Sprite용 셰이더가 리소스를 너무 많이 먹어서 필요한 부분 빼고 Default로 바꿔줬음.
- 근데 앞뒤 구분 안 된 채 렌더링되는 오류 나서 셰이더 또 찾아서 적용해줬음.
- 완벽하진 않지만 60FPS 방어 잘됨.

## **출시 기준**

- 그래서 준비했다. 출시 기준!
- 그럼에도 이 프로젝트는 끝까지 가보고 싶다.
- 구글 피처링 신청 가능한 정도로만 만들거임.

## **향후 계획**

- 예전에 유니티가 발간한 게임 업계 보고서에서 "씹을 수 있을 만큼만 물어라(Don't bite off more than you can chew)"라는 충고를 본 적이 있음.
- 지금 내 상황이 딱 이런듯.
- 오브젝트를 다양화하고, 애니메이션과 상호작용을 만들고, 이게 혼자서는 너무 시간과 노력이 생각보다 많이 든다.
- 오브젝트 재활용에 대한 고민이 필요할 것 같음. 컬러 팔레트? 스와프? 조차 고려 안했음.

## **마치며**

- 6월에 사회복무요원 근무가 시작됨. 훈련소 가야 함.
- 향후 간간히 개발해야겠다. 스토어 등록까지는 해보고 싶음.
---
title:  "CPU의 구조와 동작원리 이해하기"

categories:
  - 전자기계
tags:
  - [Arm, AP, SoC, 스마트폰, 스마트폰 프로세서]

toc: true
toc_sticky: true
 
date: 2022-08-16
last_modified_at: 2022-08-19
---

<h1>주의! 아직 작성중인 글입니다.</h1>

---

<h1>사전 지식</h1>

CPU가 만들어지는 과정을 이해하기 전에, 용어를 사전에 한 번 정리하고 갈 필요가 있다.  

<h2>트랜지스터와 CPU</h2>

![kisspng-transistor-npn-power-converters-pnp-tranzistor-transistor-5adfc499b60965 2362534915246142977456-removebg-preview](https://user-images.githubusercontent.com/96360829/185552492-4b22d826-3033-46f3-b770-1c4d0410ef9e.png){: width="280" height="280"}
<span style="font-size:50%"><center>《가장 기본적인 형태의 트랜지스터》</center></span>

CPU는 P형반도체와 N형반도체를 이어 만든 <b>트랜지스터</b>의 광범위한 조합물이다.  

"<b>트랜지스터(Transistor)</b>"는 <b>전기전도성</b>을 가지면서 <b>저항</b>의 역할도 수행한다는 의미를 담아 Transfer(전송하다)와 Varistor(저항 소자)라는 두 영단어를 합성해 지어진 이름이다.  
트랜지스터는 전류 증폭, 전류 스위칭(On/Off), 등의 역할을 맡는데, 회로의 배치에 따라  AND(논리곱), OR(논리합), XOR(배타적 논리합) 게이트(gate) 등의 논리게이트를 구성하여 <b>논리연산</b>을 수행한다.

논리연산은 회로에 걸리는 규격화된 전압(5V 혹은 3.3V)에 따라 전압의 여부에 따라 0과 1로 치환되어 계산된다.
논리게이트를 끼리끼리 조합하면 그 경우와 규모에 따라 산수 연산과 보다 복잡한 논리연산이 가능하게 되며, 이 트랜지스터 조합 블록을 <b>산술 논리 장치(ALU)</b> 라고 부른다.

CPU에서 연산은 ALU에서 이루어진다. ALU의 입출력을 조율하는 <b>CU(제어 장치)</b>, 연산 도중의 임시 저장소 역할을 하는 <b>레지스터(Register)</b>, 데이터 통신 체계인 <b>버스(Bus)</b>, 병목현상(데이터 입출력 지연)을 방지하기 위한 <b>캐시(Cache)</b> 등 다른 CPU 구성 요소도 있지만, 출력물이 만들어지는 장소는 ALU이며 이 산술논리장치는 트랜지스터라는 지식적 산물이 근간을 이룬다.

<h2>아키텍처</h2>
 
CPU를 구성할 때 개별적인 ALU를 묶어 보다 효율적으로 동작하는 하나의 블록을 구성할 수 있는데, 이 때 하나의 CPU의 구성 요소가 되는 개별 블록를 <b>코어(Core)</b>라고 부른다.  
또한 CPU 구성 요소 중 하나인 캐시는 데이터 전송 속도와 데이터 전송 속도에 반비례하는 그 용량에 따라 <b>L1, L2, L3 캐시</b>로 분류된다.

CPU는 폰 노이만 구조라는 큰 틀 안에서 각 회사의 방침에 따라 세부구조가 각기 다르게 설계된다. 
코어의 구조나 개수가 다를 수 있고, 코어의 주위에 L1, L2, L3 캐시를 레벨마다 다른 방법으로 배치할 수도 있다.  
이렇게 설계되는 CPU의 설계구조를 Architecture, <b>아키텍처</b>라고 한다. 아키텍처는 회사마다 다르고, 한 회사의 아키텍처도 시간이 흐르고 구조가 수정됨에 따라 변할 수 있다.

<h2>시스템반도체와 SoC</h2>

설명에 앞서, 반도체가 무엇이냐는 물음에는 이렇게 답하는 것이 좋을 것이다.

> <b>반도체</b>란, 원자가띠에 있는 최외각전자가 전도띠에 전이하여 자유전자가 되기 위해 필요한 띠 틈만큼의 에너지가 전도체와 부도체 사이 수준인 물질로, 실리콘(Si)과 저마늄(Ge) 등이 해당된다. 

이것은 맞는 설명이고 일반적인 지식이다.  
그러나, 반도체라는 단어에는 <b>"가공되어 소비되는 반도체 칩, 혹은 반도체 산업"</b> 그 자체를 지칭하기 위한 관습적인 의미가 있으며 나는 이것을 사용할 것이다.  

반도체는 크게 램(RAM)과 롬(ROM)과 같이 정보를 저장하기 위한 <b>메모리반도체</b>와, CPU 또는 GPU와 같이 정보를 처리하기 위한 <b>시스템반도체</b>의 두 가지 유형으로 분류된다.  
<b>SoC(System on Chip)</b>는 대표적인 시스템반도체의 일종으로, <i>CPU, GPU, 특히 모바일 프로세서의 경우 여기에 이미지 데이터 처리를 위한 ISP(Image Signal Processor), NPU(Neural Processing Unit) 외 VPU, DSP, 모뎀(MODEM)...</i>등, 전체의 시스템(System)이 칩(Chip) 하나에 담겨있는 기술집약 반도체를 말한다.  
이 용어는 <b>AP(Application Processor)</b>와도 혼동되는데, SoC가 개념을 객관화하고 분류하기 위한 집합에 붙여진 이름이라면 AP는 그 집합의 구성원소로 이해할 수 있다. 다음과 같이 표현하면 적절할 것이다.

![E2200__SD888-removebg-preview](https://user-images.githubusercontent.com/96360829/185637458-0e5cef53-ad34-4e4b-9221-08197eebf8ee.png){: width="550" height="550"}
<span style = "font-size:80%" ><center>2021년의 대표적인 모바일 SoC인 스냅드래곤 888과 엑시노스 2100의 공식 다이어그램.</center></span>
<span style = "font-size:80%" ><center>기기사용에 필요한 모든 것들을 하나의 칩에서 조율한다.</center></span>

<h2>팹리스 기업, Arm</h2>

반도체를 설계하되 직접 생산하지 않는 기업을 제조(fabrication)하지 않는(less)다는 의미로 <b>팹리스(fabless)</b> 기업이라고 부른다.

<b>Arm</b>은 영국의 대표적인 팹리스 기업으로, 설계한 프로세서를 하드 마크로셀(Hard Macrocell, 코어 크기와 전압 등이 고정되어 설계변경이 불가능) 또는 합성 가능한 코어(Synthesizable core, 코어 크기와 내부 메모리 변경이 가능)를 지적재산권(IP)의 형태로 반도체 제조 회사에 라이센싱하여 판매한다.  
Arm으로부터 코어 설계도를 전달받은 SoC를 제조하는 회사는 Arm Core에 주변장치를 추가하여 SoC를 구성한 후 판매하거나 자체 제품에서 사용한다.

---

---
title:  "[유니티] OnScreenStick 클래스를 사용한 조이스틱 구현"

categories:
  - 유니티
tags:
  - [유니티, Unity, 안드로이드, Android]

toc: true
toc_sticky: true
 
date: 2023-01-30
last_modified_at: 2023-01-30
---

<br>

유니티는 조이스틱 동작을 위한 OnScreenStick 클래스를 공식적으로 지원하므로 이것을 이용하는 것이 편리하다.  

<br> 

OnScreenStick 클래스는 Package Manager > Unity Registry 창에서 "Input System"을 설치 및 임포트하여 사용할 수 있다. 조이스틱으로 사용할 Image UI를 생성하여 OnScreenStick 컴포넌트를 추가하는 식으로 사용할 수 있다.  
다만 나는 조이스틱의 중심점 오브젝트까지 포함해 하나의 Prefab으로 사용하고 싶어서, 조이스틱으로 플레이어를 실제로 움직이기 위한 코드를 구현할 겸 새 스크립트에서 코드를 작성했다.

<br>

```cs
// followingPlayer.cs

private float followingSpeed = 0.1f;

void Update()
{
    distanceFromCenter = joystickPosition.anchoredPosition
                       - centerPosition.anchoredPosition
                       + new Vector2(transform.localScale.x / 2, transform.localScale.y / 2);

    player.transform.Translate(distanceFromCenter * Time.deltaTime * followingSpeed);
  }
```

<br>

각 오브젝트의 좌표값 차를 통해 플레이어의 이동에 동기화하기 위한 벡터값을 구할 수 있으므로, 적절한 상수를 곱해 플레이어를 이동에 관여하는 스크립트를 작성하면 조이스틱의 동작 구현이 가능하다.

<br>

---
# 참고
[유니티 스크립팅 API | Class OnScreenStick](https://docs.unity3d.com/Packages/com.unity.inputsystem@1.0/api/UnityEngine.InputSystem.OnScreen.OnScreenStick.html)
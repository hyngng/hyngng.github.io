---
title:  "[유니티] 조이스틱 구현"

categories:
  - 유니티
tags:
  - [유니티, Unity, 안드로이드, Android]

toc: true
toc_sticky: true
 
date: 2023-01-30
last_modified_at: 2023-01-30
---

<br/>

먼저 패키지 매니저의 유니티 레지스트리 창에서 "Input System"을 설치해야 한다.  
이후 하이어라키 창에서 조이스틱으로 사용할 이미지 UI를 생성한 뒤 OnScreenStick 컴포넌트를 추가하면 조이스틱으로 잘 동작한다.  

다만 나는 조이스틱의 중심점 오브젝트까지 합해 하나의 프리팹으로 사용하고 싶어서, 조이스틱으로 플레이어를 실제로 움직이기 위한 코드를 구현할 겸, 새로운 스크립트를 만들어 추가적인 코드를 작성했다.  

<br/>

```cs
// followingPlayer.cs

private float followingSpeed = 0.05f;

void FixedUpdate()
{
    distanceFromCenter = position_Of_Joystick.anchoredPosition
                        - position_Of_JoystickCenter.anchoredPosition
                        + new Vector2(10, 10);

    player.transform.Translate(distanceFromCenter * Time.deltaTime * followingSpeed);
  }
```

<br/>

나는 두 개의 UI 오브젝트를 두었는데, 하나는 조이스틱의 중심점을 지키고 있는 오브젝트(이하 센터)로서, 다른 하나는 사용자가 직접 움직일 조이스틱(이하 스틱)으로서 동작하도록 두었다.  

이러한 경우 스틱의 좌표값에서 센터의 좌표값의 차를 통해 플레이어의 이동에 참조할 벡터를 구할 수 있으므로, 이에 상수를 곱해 플레이어를 이동시키면 조이스틱의 동작 구현이 가능하다.